    <footer id="footer-fix">
        <div id="footer-sidebar" class="footer-sidebar">
            <div class="navbar">
                <div class="btn-toolbar"> <a class="btn btn-glyph btn-link" style="font-size:12px;color:green" href="mainpage.php"><small >&copy; 2017 EVSUCC | OHMFM</small></a> </div>
            </div>
        </div>
        <!-- // footer sidebar -->

        <div id="footer-content" class="footer-content">
            <div class="navbar navbar-inverse">
                <div class="navbar-inner">
                    <ul class="nav pull-left">
                        <li class="divider-vertical hidden-phone"></li>
                        <li><a id="btnToggleSidebar" class="btn-glyph fontello-icon-resize-full-2 tip hidden-phone" href="javascript:void(0);" title="show hide sidebar"></a></li>
                        <li class="divider-vertical hidden-phone"></li>
                        <li><a id="btnChangeSidebar" class="btn-glyph fontello-icon-login tip hidden-phone" href="javascript:void(0);" title="change sidebar position"></a></li>
                        <li class="divider-vertical"></li>
                        <li><a id="btnChangeSidebarColor" class="btn-glyph fontello-icon-palette tip" href="javascript:void(0);" title="change sidebar color"></a></li>
                        <li class="divider-vertical"></li>
                        <li><a class="btn-glyph fontello-icon-cw" href="javascript:void(0);"></a></li>
                        <li class="divider-vertical"></li>
                        <li><a class="fontello-icon-home-3" href="dashboard-one.html"></a></li>
                        <li class="divider-vertical"></li>
                    </ul>
                    <ul class="nav pull-right">
                        <li class="divider-vertical"></li>
                        <li><a class="btn-glyph fontello-icon-help-2 tip" href="javascript:void(0);" title="help to page"></a></li>
                        <li class="divider-vertical"></li>
                        <li><a class="btn-glyph fontello-icon-cog-4 tip" href="javascript:void(0);" title="settings app"></a></li>
                        <li class="divider-vertical"></li>
                        <li><a id="btnLogout" class="btn-glyph fontello-icon-logout-1 tip" href="javascript:void(0);" title="logout"></a></li>
                        <li class="divider-vertical"></li>
                        <li><a id="btnScrollup" class="scrollup btn-glyph fontello-icon-up-open-1" href="javascript:void(0);"><span class="hidden-phone">Scroll</span></a></li>
                    </ul>
                </div>
            </div>
        </div>
        <!-- // footer content -->

    </footer>
    <!-- // footer-fix  -->

</div>
<!-- // page-container  -->

<!-- Le javascript -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="assets/js/lib/jquery.js"></script>
<script src="assets/js/lib/jquery-ui.js"></script>
<script src="assets/js/lib/jquery.cookie.js"></script>
<script src="assets/js/lib/jquery.date.min.js"></script>
<script src="assets/js/lib/jquery.mousewheel.js"></script>
<script src="assets/js/lib/jquery.load-image.min.js"></script>
<script src="assets/js/lib/bootstrap/bootstrap.js"></script>

<!-- Plugins Bootstrap -->
<script src="assets/plugins/bootstrap-wysihtml5/lib/js/wysihtml5-0.3.0.min.js"></script>
<script src="assets/plugins/bootstrap-wysihtml5/src/bootstrap-wysihtml5.js"></script>
<script src="assets/plugins/bootstrap-fuelux/all-fuelux.min.js"></script>
<script src="assets/plugins/bootstrap-datepicker/js/bootstrap-datepicker.js"></script>
<script src="assets/plugins/bootstrap-timepicker/js/bootstrap-timepicker.js"></script>
<script src="assets/plugins/bootstrap-datetimepicker/js/bootstrap-datetimepicker.js"></script>
<script src="assets/plugins/bootstrap-colorpicker/js/bootstrap-colorpicker.js"></script>
<script src="assets/plugins/bootstrap-daterangepicker/js/bootstrap-daterangepicker.js"></script>
<script src="assets/plugins/bootstrap-toggle-button/js/bootstrap-toggle-button.js"></script>
<script src="assets/plugins/bootstrap-fileupload/js/bootstrap-fileupload.js"></script>
<script src="assets/plugins/bootstrap-rowlink/js/bootstrap-rowlink.js"></script>
<script src="assets/plugins/bootstrap-progressbar/js/bootstrap-progressbar.js"></script>
<script src="assets/plugins/bootstrap-select/bootstrap-select.js"></script>
<script src="assets/plugins/bootstrap-multiselect/js/bootstrap-multiselect.js"></script>
<script src="assets/plugins/bootstrap-bootbox/bootbox.min.js"></script>
<script src="assets/plugins/bootstrap-modal/js/bootstrap-modalmanager.js"></script>
<script src="assets/plugins/bootstrap-modal/js/bootstrap-modal.js"></script>
<script src="assets/plugins/bootstrap-wizard/js/bootstrap-wizard.min.js"></script>
<script src="assets/plugins/bootstrap-wizard-2/js/bwizard-only.min.js"></script>
<script src="assets/plugins/bootstrap-image-gallery/js/bootstrap-image-gallery.min.js"></script>


<!-- Plugins Custom - Only example -->
<script src="assets/plugins/pl-extension/google-code-prettify/prettify.js"></script>

<!-- Plugins Custom - System -->
<script src="assets/plugins/pl-system/nicescroll/jquery.nicescroll.min.js"></script>
<script src="assets/plugins/pl-system/xbreadcrumbs/xbreadcrumbs.js"></script>

<!-- Plugins Custom - System info -->
<script src="assets/plugins/pl-system-info/qtip2/dist/jquery.qtip.min.js"></script>
<script src="assets/plugins/pl-system-info/gritter/js/jquery.gritter.min.js"></script>
<script src="assets/plugins/pl-system-info/notyfy/jquery.notyfy.js"></script>
<script src="assets/plugins/pl-system-info/notyfy/jquery.notyfy.js"></script>
<script src="assets/js/pnotify.custom.min.js"></script>


<!-- Plugins Custom - Content -->
<script src="assets/plugins/pl-content/list/js/list.min.js"></script>
<script src="assets/plugins/pl-content/list/plugins/list.paging.min.js"></script>
<script src="assets/plugins/pl-content/jpages/js/jPages.js"></script>

<!-- Plugins Custom - Component -->
<script src="assets/plugins/pl-component/fullcalendar/fullcalendar.min.js"></script>
<script src="assets/plugins/pl-component/rangeslider/jqallrangesliders.min.js"></script>

<!-- Plugins Custom - Form -->
<script src="assets/plugins/pl-form/uniform/jquery.uniform.min.js"></script>
<script src="assets/plugins/pl-form/select2/select2.min.js"></script>
<script src="assets/plugins/pl-form/counter/jquery.counter.js"></script>
<script src="assets/plugins/pl-form/elastic/jquery.elastic.js"></script>
<script src="assets/plugins/pl-form/inputmask/jquery.inputmask.js"></script>
<script src="assets/plugins/pl-form/inputmask/jquery.inputmask.extensions.js"></script>
<script src="assets/plugins/pl-form/validate/js/jquery.validate.min.js"></script>
<script src="assets/plugins/pl-form/duallistbox/jquery.duallistbox.min.js"></script>

<!-- Plugins Custom - Gallery -->
<script src="assets/plugins/pl-gallery/nailthumb/jquery.nailthumb.1.1.min.js"></script>
<script src="assets/plugins/pl-gallery/nailthumb/showLoading/js/jquery.showLoading.min.js"></script>
<script src="assets/plugins/pl-gallery/wookmark/jquery.imagesloaded.js"></script>
<script src="assets/plugins/pl-gallery/wookmark/jquery.wookmark.min.js"></script>

<!-- Plugins Tables -->
<script src="assets/plugins/pl-table/datatables/media/js/jquery.dataTables2.js"></script> 

<!-- Plugins data visualization -->
<script src="assets/plugins/pl-visualization/sparkline/jquery.sparkline.min.js"></script>
<script src="assets/plugins/pl-visualization/easy-pie-chart/jquery.easy-pie-chart.js"></script>
<script src="assets/plugins/pl-visualization/percentageloader/percentageloader.min.js"></script>
<script src="assets/plugins/pl-visualization/knob/knob.js"></script>
<script src="assets/plugins/pl-visualization/flot/jquery.flot.js"></script>
<script src="assets/plugins/pl-visualization/flot/jquery.flot.categories.js"></script>
<script src="assets/plugins/pl-visualization/flot/jquery.flot.grow.js"></script>
<script src="assets/plugins/pl-visualization/flot/jquery.flot.orderBars.js"></script>
<script src="assets/plugins/pl-visualization/flot/jquery.flot.pie.js"></script>
<script src="assets/plugins/pl-visualization/flot/jquery.flot.resize.js"></script>
<script src="assets/plugins/pl-visualization/flot/jquery.flot.selection.js"></script>
<script src="assets/plugins/pl-visualization/flot/jquery.flot.stack.js"></script>
<script src="assets/plugins/pl-visualization/flot/jquery.flot.stackpercent.js"></script>
<script src="assets/plugins/pl-visualization/flot/jquery.flot.time.js"></script>

<!-- main js -->
<script src="assets/js/core.js"></script>
<script src="assets/js/application.js"></script>
<script src="scripts/events.js"></script>

<script src="scripts/tank.js"></script>

<script src="scripts/feeds.js"></script>
<script src="scripts/mainpage.js"></script>
<script src="scripts/validate.js"></script>
<script src="scripts/validate.min.js"></script>




<!-- Only This Demo Page -->

<script>
$(document).ready(function() {



  // user register
$('#register').on('click','#registerUser',function(){

 if($('#uname').val() == 0 || $('#pass').val() == 0)
 {
       new PNotify({
            title: 'Warning!!',
             text: '<h4>Fill out empty Fields!!</h4>',
                type: 'error',
                animate_speed: "slow",
        delay: 2000,
        animate: {
            animate: true,
            in_class: 'bounceInLeft',
        out_class: 'bounceOutRight'
                }

            });
             
 }else{ 
          var fname = $('#fname').val();
          var lname = $('#lname').val();
          var uname = $('#uname').val();
          var pass = $('#pass').val();
          var user_type = $('#user_type').val();
          var cp = $('#cp').val();
          
        $.post('class/registerUser.php',{fname : fname, lname : lname, uname: uname, pass: pass , user_type : user_type, cp : cp},function(data)
        {

                if(data.s = true){
                     new PNotify({
            title: 'Registration',
             text: '<h4>Successfull</h4>',
                type: 'success',
                animate_speed: "slow",
               delay: 5000,
              animate: {
            animate: true,
            in_class: 'bounceInLeft',
            out_class: 'bounceOutRight'
                }
            

                    });
                }
                 $.get('http://192.168.254.52/?g'+cp,function(){});

        });

        $('#register').modal('hide');
 }

});



  //=====
//=====================
$('#tankBox').on('click','#tank_edit',function(){
  var id = parseInt($(this).val());
  console.log(id);
    $.get('class/getTankDim.php',{tank_id :id },function(data){

            $.each(data,function(i,key){
                $('#edit_Tank :input[type="hidden"]').val(id);
                $('#edit_Tank :input[name="etank_name"]').val(key.tank_name);
               $('#edit_Tank option[value="'+key.tank_shape+'"]').prop('selected', true);
               $('#edit_Tank :input[name="etank_l"]').val(key.tlength);
               $('#edit_Tank :input[name="etank_h"]').val(key.theight);
               $('#edit_Tank :input[name="etank_w"]').val(key.twidth);
               $('#edit_Tank :input[name="etank_r"]').val(key.tradius);





            });
            $('#edit_Tank').modal('show');



    });



});

$('#edit_Tank').on('click','#updateTank',function(){
        var tank_id = parseInt($('#etank_id').val());
        var tank_shape = $('#tank_shape').val();
        var tank_name = $('#tank_name').val();
        var l = $('#etank_l').val();
        var h = $('#etank_h').val();
        var w = $('#etank_w').val();
        var r = $('#etank_r').val();
        console.log(tank_id,l,w,h,r);
        $.post('class/editTank.php',{tank_id :tank_id,tank_shape:tank_shape,tank_name : tank_name,l :l,h:h,w:w,r:r},function(){
            console.log(data.s);

        });

}); 



//===================
setTimeout(function(){ 
$.getJSON('http://192.168.254.52',function(data){

if(data.sensor > 13)
{
    $.get('class/getNumbers.php',function(data){
        $.each(data,function(i,key){ 
            $.get('http://192.168.254.52/?w'+key.mobile_num,function(){});




        });

    
      new PNotify({
            title: 'Warning!!',
             text: '<h4>Feeds is under 25 %!!</h4>',
                type: 'error',
                animate_speed: "slow",
               delay: 5000,
              animate: {
            animate: true,
            in_class: 'bounceInLeft',
            out_class: 'bounceOutRight'
                }
            

            });
    });
}
  

});
},7000);
//==
 function currHour()
 {
        var e = new Date();
       
        return e.getHours();
 }

 function currMin()
 {
        var e = new Date();
       
        return e.getMinutes();
 }

 

  //=====end functions time


//====end validation


//get data
setInterval(function(){ 
  
$.get('class/getTime.php',function(data){


$.each(data,function(i,key){

       
        
         var t = new Date("November 13, 2013 " + key.feed_time);
         console.log(key.sched_id);
        if(currHour() == t.getHours() && currMin() == t.getMinutes())
        {
            
            var speed = (key.feed_amount/50) * 1000;
            $.get('class/setStatus.php',{id : key.sched_id},function(data){});
         $.get('http://192.168.254.52/?delay='+speed,function()
            {
                

          });



         }
  
    
        
      

            });//each

});



},5000);
//== progress bar
function sensorVal(sensorV)
{

  $('.progress .bar.text-centered-15').css('width', sensorV+'%');
$('.progressbar-back-text').html(sensorV+' %');
$('.progressbar-front-text').html(sensorV+' %');
if(sensorV<30)
{
$('.progress').removeClass('progress-success progress-warning  progress-info').addClass('progress-danger');
}else if(sensorV<=60 && sensorV>=30 )
{
  $('.progress').removeClass('progress-danger progress-success progress-info').addClass('progress-warning');

}else if(sensorV<=94 && sensorV>=60){
  $('.progress').removeClass('progress-danger progress-warning progress-success').addClass('progress-info');

}else{
 $('.progress').removeClass('progress-danger progress-warning progress-info').addClass('progress-success');
}
}

//===
//===== function sensor data
function formatSensor(sen)
{
  switch (sen) {
    case 18:
        return 0;
        break;
    case 17:
       return 6;
        break;
    case 16:
       return 12;
        break;
    case 15:
        return 19;
        break;
    case 14:
        return 25;
        break;
    case 13:
        return 31;
        break;
    case 12: 
         return 37;
        break;
     case 11: 
         return 44;
        break;
      case 10: 
         return 50;
        break;
       case 9: 
         return 56;
        break;
        case 8: 
         return 62;
        break;
        case 7: 
         return 69;
        break;
        case 6: 
         return 75;
        break;
        case 5: 
         return 81;
        break;
        case 4: 
         return 87;
        break;
        case 3: 
         return 94;
        break;
        case 2: 
         return 100;
        break;
        case 1: 
         return 100;
        break;
        default:
          return 0;
          break;
}
}


//==
    
$('.progress .bar.text-centered-15').progressbar({
            display_text: 2,
        });
setInterval(function(){ 
$.getJSON('http://192.168.254.52',function(data){
console.log(data.sensor);
  sensorVal(formatSensor(data.sensor));

});
},2000);


//end get
//======= end event
$('#eventsBox').on('click','#end',function(){

   event_id = $(this).val();

   event_name = $('#event_type').val();
   // if(event_name == 'Nursing/Rearing')
   // {
        
   // }


   $('#end_id').val(event_id);
   $('#endEvent').modal('show');
});

$('#endEvent').on('click','#endEvents',function(){
   eid =  $('#end_id').val();
   event_name = $('#event_type').val();
   console.log(eid);
   // if(event_name == 'Nursing/Rearing')
   // {

   // }

   $.get('class/endEvent.php',{event_id :eid},function(data){
        if(data.s = true){
            new PNotify({
            title: 'Success',
             text: '<h4>Event Ended!!</h4>',
                type: 'info',
                animate_speed: "slow",
        delay: 2000,
        animate: {
            animate: true,
            in_class: 'bounceInLeft',
            out_class: 'bounceOutRight'
                }

            });
             
        }
        $('#endEvent').modal('hide');
        display_events();
   });
});

//============ end event
$.fn.clearForm = function() {
  return this.each(function() {
    var type = this.type, tag = this.tagName.toLowerCase();
    if (tag == 'form')
      return $(':input',this).clearForm();
    if (type == 'text' || type == 'password' || tag == 'textarea' || tag =='number')
      this.value = '';
    else if (type == 'checkbox' || type == 'radio')
      this.checked = false;
    else if (tag == 'select')
      this.selectedIndex = -1;

  });
};
    //=== clear inputs 
    function clearInputs()
    {
    $('#doxy').val("");
   $('#temp').val("");
    $('#turbidity').val("");
   $('#depth').val("");
    $('#ph').val("");
    
    }


    //==
$('#updateParam').on('click','#add_new',function(){
    id = $('#event_id').val();
    doxy = $('#doxy2').val();
    temp = $('#temp2').val();
    turbidity = $('#turbidity2').val();
    depth = $('#depth2').val();
    ph = $('#ph2').val();
   console.log(id);
    $.post('class/addParam.php',{id:id,doxy :doxy,temp :temp,turbidity :turbidity,depth :depth,ph:ph},function(data){
            
        if(data.s = true)
        {
            new PNotify({
            title: 'Info',
             text: '<h4>New Parameter Added!!</h4>',
                type: 'success',
                animate_speed: "slow",
        delay: 2000,
        animate: {
            animate: true,
            in_class: 'bounceInLeft',
        out_class: 'bounceOutRight'
                }

            });
             
display_param(id);


        }
clearInputs();

    })

});

function display_param(id)
{
    

       

     $.get('class/getParam.php',{id : id},function(response){
            paramTable.clear().draw();
                console.log(response);
            $.each(response,function(i,key){

                console.log(key.doxy);
                paramTable.row.add([key.doxy,key.ph,key.temperature,key.depth,key.turbidity,key.date_last+'<input type="hidden" name="tank_id" id="tank_id" value="'+key.event_id+'">']);

            });

             paramTable.draw();



             });
}

$('#eventsBox').on('click','#etank',function(){
    id = $(this).val();

       console.log(id);

     $.get('class/getParam.php',{id : id},function(response){
            paramTable.clear().draw();

            $.each(response,function(i,key){

                console.log(key.doxy);
            paramTable.row.add([key.doxy,key.ph,key.temperature,key.depth,key.turbidity,key.date_last+'<input type="hidden" name="event_id" id="event_id" value="'+key.event_id+'">']);

            });

             paramTable.draw();



             });
     $('#updateParam').modal('show');
    
});

var paramTable = $('#param_table').DataTable({

               
              searching:true,
              ordering:true,
              
              lengthMenu: [[5,10,20,30,-1],[5,10,20,30,'All']],
              language: {
                    lengthMenu: 'Display _MENU_ parameters',
                    search : 'Search Event: ',
                    emptyTable: ' <h7>No parameters Available!!</h7>',
                    loadingRecords: "Loading...",
                    info : 'Showing _START_ to _END_ of _TOTAL_ parameters',
                    zeroRecords:    '<div class="alert alert-error"><h4>No matching parameters found!!</h4></div>',
                     }
               
               


          });


var eventsTable = $('#eventsBox').DataTable({

               
              searching:true,
              ordering:true,
              
              lengthMenu: [[5,10,20,30,-1],[5,10,20,30,'All']],
              language: {
                    lengthMenu: 'Display _MENU_ events',
                    search : 'Search Event: ',
                    emptyTable: '<div class="alert alert-error"> <h4>No Available List!! Available!!</h4></div>',
                    loadingRecords: "Loading...",
                    info : 'Showing _START_ to _END_ of _TOTAL_ events',
                    zeroRecords:    '<div class="alert alert-error"><h4>No Instructor Found!!</h4></div>',
                     }
                     
               
               


          });

display_events();



function display_events(){
     $.get('class/getEvents.php',function(response){
            eventsTable.clear().draw();

            $.each(response,function(i,key){


             eventsTable.row.add([key.event_name,key.tank_name,key.specie_name,key.events_date,'Day '+ key.day_count,'<button    id="etank" type="button" class="btn btn-green btn-md"  value="'+key.event_id+'"role="button"><i class="fontello-icon-edit"></i>Update Parameter</button> | <button id="end" type="button" class="btn btn-red btn-md"  value="'+key.event_id+'"role="button"><i class="fontello-icon-trash"></i>End</button> | <button id="editFeeder" type="button" class="btn btn-blue btn-md"  value="'+key.event_id+'"role="button"><i class="fontello-icon-trash"></i>Edit Feeder</button>']);

            });
            $('#wizard-idicator').find("a[href*='tab1f']").trigger('click');

             eventsTable.draw();



             });
   }

//=======save event================//
$('#addevent').click(function()
{
    
    var event_type = $('#event_type').val(); 
    if(event_type == 'Conditioning')
    {
        addEvent_C();
        $('#wizard-idicator').clearForm();

    }else if(event_type == 'Breeding/Spawning')
        {
            addEvent_B();
            $('#wizard-idicator').clearForm();
        }
        else if(event_type == 'Nursing/Rearing')
        {
            addEvent_N();
            $('#wizard-idicator').clearForm();
            console.log("asdfasdf");
        }
    
});


//=========== function to add event =======
    //conditioning
function addEvent_C()
{
        var event_type = $('#event_type').val(); 
        var specie_id = parseInt($('#specie_id').val());
        var date_start = $('#date_start').val();
        var tank_id = parseInt($('#tank').val());
        var sex = $('#sex').val();
        var no_specie = $('#no_specie').val();
        // feeder properties
        var feed_id = $('#feed').val();
        var sched = $('input[name="feed_sched[]"]').map(function()
            {
                return $(this).val();
            }).get();
        var dfr = $('#dfr').val();
        var fish_weight = $('#fish_weight').val();

        //water parameters
        var doxy = $('#e_doxy').val();
        var ph = $('#e_ph').val();
        var temp = $('#e_temp').val();
        var turbidity = $('#e_turbidity').val();
        var depth = $('#e_depth').val();



        console.log(sched);
        //

    $.post('class/addEventC.php',{event_type : event_type,sid :specie_id,date_start : date_start, tid :tank_id, sex:sex, no_specie: no_specie,feed_id :feed_id ,sched :sched,dfr :dfr, fish_weight:fish_weight,doxy :doxy,ph :ph,temp:temp,turbidity :turbidity ,depth:depth},function(data){

        if(data.eventadd = true)
        {   


        new PNotify({
    title: 'Success',
    text: '<h4>New Event Added!!</h4>',
    type: 'success',
    animate_speed: "slow",
        delay: 2000,
        animate: {
            animate: true,
            in_class: 'bounceInLeft',
        out_class: 'bounceOutRight'
                }

            });
        

                    $('#addEvent').modal('hide');
           

        }   
                                    
       location.reload();
         });

    

}
    //end


//=====function save breeding tank

function addEvent_B()
{
        var event_type = $('#event_type').val(); 
        var specie_id = parseInt($('#specie_id').val());
        var date_start = $('#date_start').val();
        var tank_id = parseInt($('#tank').val());
        var no_specie = $('#sd').val();
        var ratio = $('#ratio').val();
        // feeder properties
        var feed_id = $('#feed').val();
        var sched = $('input[name="feed_sched[]"]').map(function()
            {
                return $(this).val();
            }).get();
        var dfr = $('#dfr').val();
        var fish_weight = $('#fish_weight').val();

        //water parameters
        var doxy = $('#doxy').val();
        var ph = $('#ph').val();
        var temp = $('#temp').val();
        var turbidity = $('#turbidity').val();
        var depth = $('#depth').val();



        console.log(sched);
        //

    $.post('class/addEventB.php',{event_type : event_type,sid :specie_id,ratio : ratio,date_start : date_start, tid :tank_id,  no_specie: no_specie,feed_id :feed_id ,sched :sched,dfr :dfr, fish_weight:fish_weight,doxy :doxy,ph :ph,temp:temp,turbidity :turbidity ,depth:depth},function(data){

        if(data.eventadd = true)
        {   


        new PNotify({
    title: 'Success',
    text: '<h4>New Event Added!!</h4>',
    type: 'success',
    animate_speed: "slow",
        delay: 2000,
        animate: {
            animate: true,
            in_class: 'bounceInLeft',
        out_class: 'bounceOutRight'
                }

            });
        

             $('#addEvent').modal('hide');
           

        }   
                                    
       location.reload();
         });

    

}



//==========end breeding

//================ function save nursing tank

function addEvent_N()
{
        var event_type = $('#event_type').val(); 
        var specie_id = parseInt($('#specie_id').val());
        var date_start = $('#date_start').val();
        var tank_id = parseInt($('#tank').val());
        var no_specie = parseInt($('#nf').val());
        // var ratio = $('ratio').val();
        // feeder properties
        var feed_id = $('#feed').val();
        var sched = $('input[name="feed_sched[]"]').map(function()
            {
                return $(this).val();
            }).get();
        var dfr = $('#dfr').val();
        var fish_weight = $('#fish_weight').val();

        //water parameters
        var doxy = $('#doxy').val();
        var ph = $('#ph').val();
        var temp = $('#temp').val();
        var turbidity = $('#turbidity').val();
        var depth = $('#depth').val();



        console.log(sched);
        //

    $.post('class/addEventN.php',{event_type : event_type,sid :specie_id,date_start : date_start, tid :tank_id,  no_specie: no_specie,feed_id :feed_id ,sched :sched,dfr :dfr, fish_weight:fish_weight,doxy :doxy,ph :ph,temp:temp,turbidity :turbidity ,depth:depth},function(data){

        if(data.eventadd = true)
        {   


        new PNotify({
    title: 'Success',
    text: '<h4>New Event Added!!</h4>',
    type: 'success',
    animate_speed: "slow",
        delay: 2000,
        animate: {
            animate: true,
            in_class: 'bounceInLeft',
        out_class: 'bounceOutRight'
                }

            });
        
       
            $('#addEvent').modal('hide');
           

        }   
                                    
      location.reload();
         });

    

}

// ================ end nursing

//===================== end functions=============


//================= end save event=========///

function reset()
{   $('#fish_weight').val(0);
    $('#sd').val(0);
    $('#no_specie').val(0);
    $('#rate').val(0);
    $('#freq').val(0);
}

//=========get specie===========//



// end get specie///

//===========nursing===========

$('#addEvent').on('input','#nf',function(){



var weight = parseInt($('#fish_weight').val());
var no_stock = parseInt($('#nf').val());


var rate = $('select[name="rate"]').val();
var freq= $('select[name="freq"]').val();
var biomass = 0;
var survival_rate = 0;

if ($('#specie_id').val() == 4) 
    {   rate = rate/100;

        survival_rate = .95;
        

            //biomass
        biomass = (weight * no_stock *  survival_rate)/1000;

            //dfr

        var dfr = (biomass * rate);
        var feeder_amount = dfr / freq;
        
        $('#dfr').val(dfr.toFixed(2));
         

    }else{
            rate = rate/100;

        survival_rate = .5;
        

            //biomass
        biomass = (weight * no_stock *  survival_rate)/1000;

            //dfr

        var dfr = (biomass * rate);
        var feeder_amount = dfr / freq;
        
        $('#dfr').val(dfr.toFixed(2));
    }


});





//================= end nursing
//=====================tank change
$('#tank').click(function(){

    reset();
    var tank = $('#tank').val();
    var ratio = $('#ratio').val();
    $.get('class/getTankDim.php',{tank_id:tank},function(response){
            $.each(response,function(i,key){
                var tank_h = key.theight/100;
                var tank_l = key.tlength/100;
                var tank_w = key.twidth/100;
                var area = tank_l * tank_w;
                var sd = area * ratio;
                
                $('#sd').val(sd);


            });

             });
                });


//========================
//=================get stocking density============

    $('#ratio').change(function(){
    $('select[name="rate"]').val(0);
    
    $('#fish_weight').val(0);
    $('#dfr').val(0);

    var tank = $('#tank').val();
    var ratio = $('#ratio').val();

    var weight = parseInt($('#fish_weight').val());

  $.get('class/getTankDim.php',{tank_id:tank},function(response){
            $.each(response,function(i,key){
                var tank_h = key.theight/100;
                var tank_l = key.tlength/100;
                var tank_w = key.twidth/100;
                var area = tank_l * tank_w;
                var sd = area * ratio;
                
                
                $('#sd').val(sd);


            });

             });

var rate = parseInt($('select[name="rate"]').val());
// var freq= parseInt($('select[name="freq"]').val());
// var biomass = 0;
// var survival_rate = 0; 
// var no_stock = parseInt($('#sd').val());
// if ($('#specie_id').val() == 4) 
//     {   rate = rate/100;

//         survival_rate = .95;
        

//             //biomass
//         biomass = (weight * no_stock *  survival_rate)/1000;

//             //dfr

//         var dfr = (biomass * rate);
        
            
//         $('#dfr').val(dfr.toFixed(2));
         

//     }
    });


//===================end ========================

$('#addEvent').on('input', '#fish_weight', function (){


var weight = parseInt($('#fish_weight').val());
var no_stock = 0;

if(parseInt($('#no_specie').val()) !== 0)
{
    no_stock = parseInt($('#no_specie').val());
}else if(parseInt($('#sd').val()) !== 0)
    {

    no_stock = parseInt($('#sd').val());
    }else
    {
    no_stock = parseInt($('#nf').val())
    }

var rate = $('select[name="rate"]').val();
var freq= $('select[name="freq"]').val();
var biomass = 0;
var survival_rate = 0;

if ($('#specie_id').val() == 4) 
    {   rate = rate/100;

        survival_rate = .95;
        

            //biomass
        biomass = (weight * no_stock *  survival_rate)/1000;

            //dfr

        var dfr = (biomass * rate);
        var feeder_amount = dfr / freq;
        
        $('#dfr').val(dfr.toFixed(2));
         

    }else{
            rate = rate/100;

        survival_rate = .5;
        

            //biomass
        biomass = (weight * no_stock *  survival_rate)/1000;

            //dfr

        var dfr = (biomass * rate);
        var feeder_amount = dfr / freq;
        
        $('#dfr').val(dfr.toFixed(2));
    }

});

//================compute biomass=======
$('select[name="rate"]').click(function(){

var weight = parseInt($('#fish_weight').val());


if(parseInt($('#no_specie').val()) !== 0)
{
    no_stock = parseInt($('#no_specie').val());
}else if(parseInt($('#sd').val()) !== 0)
    {

    no_stock = parseInt($('#sd').val());
    }else
    {
    no_stock = parseInt($('#nf').val());
    }

console.log(parseInt($('#no_specie').val()),parseInt($('#sd').val()),parseInt($('#nf').val()));
var rate = $('select[name="rate"]').val();
var freq= $('select[name="freq"]').val();
var biomass = 0;
var survival_rate = 0;

if ($('#specie_id').val() == 4) 
    {   rate = rate/100;

        survival_rate = .95;
        

            //biomass
        biomass = (weight * no_stock *  survival_rate)/1000;

            //dfr

        var dfr = (biomass * rate);
        var feeder_amount = dfr / freq;
        
        $('#dfr').val(dfr.toFixed(2));
         

    }else{
            rate = rate/100;

        survival_rate = .5;
        

            //biomass
        biomass = (weight * no_stock *  survival_rate)/1000;

            //dfr

        var dfr = (biomass * rate);
        var feeder_amount = dfr / freq;
        
        $('#dfr').val(dfr.toFixed(2));
    }
});


//======================== end===============

//====== populate sched==-===

    $('select[name="freq"]').change(function() {
        var sched =   parseInt($(this).val());
        var html;
        for (i = 0; i < sched; i++) {
         html += i+'<p>';
         html += '<input name=feed_sched[] id="feed_sched" class="input-medium margin-00" size="16" type="text">';    
          html += '<span class="add-on"><i class="fontello-icon-calendar">';
          html += '</i>';
          html +='</span>';
          html += '</p>';


        }

       
        $('div#fs').html(html);

            $('input[name="feed_sched[]"]').each(function() { 
                $(this).datetimepicker({
       format: 'HH:ii p',
                autoclose: true,
                // todayHighlight: true,
                showMeridian: true,
                startView: 1,
                maxView: 1,
                timeOnly: true,
                datepicker:false,
                inline: true

});
            });
           
});







//===== end sched====

//======change events textboxes
        $('.c').hide();
        $('.br').hide();
         $('.n').hide();


$('#addEvent').on('click','#event_type',function(){
    $('#no_specie').val(0);
    $('#sd').val(0);

var weight = parseInt($('#fish_weight').val());
var no_stock;

var rate = $('select[name="rate"]').val();
var freq= $('select[name="freq"]').val();
var biomass = 0;
var survival_rate;

if ($('#specie_id').val() == 4) 
    {   rate = rate/100;

        survival_rate = .95;
       

            //biomass
        biomass = (weight * no_stock *  survival_rate)/1000;

            //dfr

        var dfr = (biomass * rate);
        
        $('#dfr').val(dfr.toFixed(2));
         

    }else($('#specie_id').val() == 1)
{
        rate = rate/100;

        survival_rate = .5;
        

            //biomass
        biomass = (weight * no_stock *  survival_rate)/1000;

            //dfr

        var dfr = (biomass * rate);
        
        $('#dfr').val(dfr.toFixed(2));

        }

        if($(this).val() == 'Conditioning'){
        $('.c').show();
        $('.br').hide();
         $('.n').hide();
         var sid = 4;
         $.get('class/getSingleSpecie.php',{id:sid},function(response){
            $.each(response,function(i,key){
                var specie_id = key.specie_id;
                var specie_type = key.specie_type;
                 $('#specie_id').val(specie_id);
               $('#specie').val(specie_type);



            });

             });
         


    }else if($(this).val() == 'Breeding/Spawning') {
         $('.c').hide();
        $('.br').show();
        $('.n').hide();
        $('#no_specie').val(0);
        var sid = 4;
         $.get('class/getSingleSpecie.php',{id:sid},function(response){
            $.each(response,function(i,key){
                var specie_id = key.specie_id;
                var specie_type = key.specie_type;
                 $('#specie_id').val(specie_id);
               $('#specie').val(specie_type);



            });

             });
    }else{
         $('.c').hide();
        $('.br').hide();
        $('.n').show();
        var sid = 1;
         $.get('class/getSingleSpecie.php',{id:sid},function(response){
            $.each(response,function(i,key){
                var specie_id = key.specie_id;
                var specie_type = key.specie_type;
                
               $('#specie').val(specie_type);
               $('#specie_id').val(specie_id);



            });

             });
    }



});




//=============end change======//


//================datepicker date started====//

$('#date_start').datepicker({
        format: "MM dd, yyyy",
        showMeridian: true,
        autoclose: true,
        todayBtn: true,
        pickerPosition: "bottom-left"

});





//============end=============

    

    
$('.progress .bar.text-centered-15').progressbar({
            display_text: 2,
        });
    //======================links/ dropdowns==================
    var sPath = window.location.pathname;
//var sPage = sPath.substring(sPath.lastIndexOf('\\') + 1);
var sPage = sPath.substring(sPath.lastIndexOf('/') + 1);



$('a').each(function() {
    var currentHref = $(this).attr('href');
    if(currentHref == sPage) {
       $(this).closest('li').addClass('active');
       $(this).closest('ul').addClass('collapse in');
       $(this).parents('li.accordion-group').find('div').addClass('active');


    }
});


if(sPage == 'mainpage.php')
{

$.gritter.add({
            title: 'Welcome, Rustom Clemente!!!!',
            text: '<a href="#">View Recent Activities</a> ',
            time: 5000
        });

}

//===============================end links/dropdowns======================

//======================tables=================================

// $(function () {
//         $('.emailST').val(0).trigger('change').delay(2000);
//         $(".emailST").knob({
//                 'min': 0,
//                 'max': 100,
//                 'readOnly': true,
//                 'dynamicDraw': true,
//                 'tickColorizeValues': true,
//                 'skin': 'tron'
//         })

//         var tmr = self.setInterval(function () {
//                 myDelay()
//         }, 70);
//         var m = 0;

//         function myDelay() {
//                 m += 1;
//                 $('.emailST').val(m).trigger('change');
//                 if(m == 70) {
//                         window.clearInterval(tmr);
//                 }
//         };
// });
///knob==
$(function () {
        
        $(".phv").knob({
                'min': 0,
                'max': 20
                ,
                'readOnly': true,
                'dynamicDraw': true,
                'thickness': 0.2,
                'tickColorizeValues': true,
                'skin': 'tron'
        });

         $(".doxyv").knob({
                'min': 0,
                'max': 10
                ,
                'readOnly': true,
                'dynamicDraw': true,
                'thickness': 0.2,
                'tickColorizeValues': true,
                'skin': 'tron'
        });

          $(".temperaturev").knob({
                'min': 0,
                'max': 40
                ,
                'readOnly': true,
                'dynamicDraw': true,
                'thickness': 0.2,
                'tickColorizeValues': true,
                'skin': 'tron'
        });

           $(".turbidityv").knob({
                'min': 0,
                'max': 40,
                'readOnly': true,
                'dynamicDraw': true,
                'thickness': 0.2,
                'tickColorizeValues': true,
                'skin': 'tron'
        });

            $(".depthv").knob({
                'min': 0,
                'max': 100
                ,
                'readOnly': true,
                'dynamicDraw': true,
                'thickness': 0.2,
                'tickColorizeValues': true,
                'skin': 'tron'
        })




        // var tmr = self.setInterval(function () {
        //         myDelay()
        // }, 50);
        // var m = 0;

        // function myDelay() {
        //         m += 1;
        //         $('.dial-1').val(m).trigger('change');
        //         if(m == 40) {
        //                 window.clearInterval(tmr);
        //         }
        // }
});

//===pie chart=====
$(function () {
        $('.epie-chart').easyPieChart({
                barColor: '#74b9eb',
                trackColor: '#c2daeb',
                animate: 3000,
                scaleColor: '#c2daeb',
                lineWidth: 6,
                size: 100
        });
        $('.epie-chart-easy').easyPieChart({
                animate: 3000,
                trackColor: "#ddd",
                scaleColor: false,
                lineWidth: 10,
                barColor: "#94d492",
                size: 100
        });

        $('.epie-chart-light').easyPieChart({
                barColor: '#74b9eb',
                trackColor: 'transparent',
                animate: 3000,
                scaleColor: false,
                lineWidth: 4,
                size: 75
        });

        $('.percentage-change').easyPieChart({
                barColor: function (percent) {
                        percent /= 100;
                        return "rgba(" + Math.round(255 * (1 - percent)) + ", " + Math.round(255 * percent) + ", 40" + ", 0.6)";
                },
                trackColor: '#ddd',
                scaleColor: false,
                lineWidth: 6,
                animate: 2300,
                size: 75
        });
        $('.percentage-change-black').easyPieChart({
                barColor: function (percent) {
                        percent /= 100;
                        return "rgba(" + Math.round(255 * (1 - percent)) + ", " + Math.round(255 * percent) + ", 100" + ", 1)";
                },
                trackColor: '#474b4e',
                scaleColor: false,
                lineWidth: 6,
                animate: 2300,
                size: 75
        });

        $('.updateEasyPieChart').on('click', function (e) {
                e.preventDefault();
                $('.epie-chart, .epie-chart-easy, .epie-chart-light, .percentage-change, .percentage-change-black').each(function () {
                        var newValue = Math.round(100 * Math.random());
                        $(this).data('easyPieChart').update(newValue);
                        $('span.value', this).text(newValue);
                });
        });
});




//======events datatable========
    
function display_specie(){
     $.get('class/getSpecie.php',function(response){
            specieTable.clear().draw();

            $.each(response,function(i,key){


             specieTable.row.add([key.specie_name,key.specie_type,key.sci_name,key.specie_description,'<button id="etank" type="button" class="btn btn-green btn-md"  value="'+key.specie_id+'"role="button"><i class="fontello-icon-edit"></i>Update</button>','<button id="delEvent" type="button" class="btn btn-red btn-md"  value="'+key.specie_id+'"role="button"><i class="fontello-icon-edit"></i>End Event</button>']);

            });

             specieTable.draw();



             });
   }
//===========================================end table ================

var specieTable = $('#specieBox').DataTable({

               
              searching:true,
              ordering:true,
              
              lengthMenu: [[100,50,20,10,-1],[100,50,20,10,'All']],
              language: {
                    lengthMenu: 'Display _MENU_ species',
                    search : 'Search specie: ',
                    emptyTable: '<div class="alert alert-error"> <h4>No Species Available!!</h4></div>',
                    loadingRecords: "Loading...",
                    info : 'Showing _START_ to _END_ of _TOTAL_ species',
                    zeroRecords:    '<div class="alert alert-error"><h4>No matching Specie found!!</h4></div>',
                     }
               
               

          });
display_specie();
//==============Add Specie===================
    
     
$('#addSpecie').on('click','#add_specie',function (){
  console.log('Clicked!');
    $.post('class/addSpecie.php',$('#fspecie').serialize(),function(data){
         
    if(data.s = true)
    {
        

new PNotify({
    title: 'Success',
    text: '<h4>New Specie Added!!</h4>',
    type: 'success',
    animate_speed: "slow",
        delay: 2000,
        animate: {
            animate: true,
            in_class: 'bounceInLeft',
        out_class: 'bounceOutRight'
                }

            });
        $('#addSpecie').modal('hide');
           display_specie();

       
    }
    else
    {
        new PNotify({
        title: 'Error!!',
        text: 'There was an error adding the Tank!!',
        type: 'error',
        animate_speed: "slow",
        delay: 2000,
        animate: {
            animate: true,
            in_class: 'bounceInLeft',
        out_class: 'bounceOutRight'
                }

                });
     }
    },'json');

        

    




 });



    
//==========end events datatable========

//==================START table feeds functionality=================//
    
function display_feeds(){
     $.get('class/getFeeds.php',function(response){
            feedsTable.clear().draw();

            $.each(response,function(i,key){


             feedsTable.row.add([key.feeds_name,key.feeds_type,key.feeds_description,'<button id="etank" type="button" class="btn btn-yellow btn-md"  value="'+key.feeds_id+'"role="button"><i class="fontello-icon-edit"></i>Edit Feeds</button>']);

            });

             feedsTable.draw();



             });
   }
//===========================================end table ================

var feedsTable = $('#feedsBox').DataTable({

               
              searching:true,
              ordering:true,
              
              lengthMenu: [[100,50,20,10,-1],[100,50,20,10,'All']],
              language: {
                    lengthMenu: 'Display _MENU_ species',
                    search : 'Search specie: ',
                    emptyTable: '<div class="alert alert-error"> <h4>No Species Available!!</h4></div>',
                    loadingRecords: "Loading...",
                    info : 'Showing _START_ to _END_ of _TOTAL_ species',
                    zeroRecords:    '<div class="alert alert-error"><h4>No matching Specie found!!</h4></div>',
                     }
               
               

          });
display_feeds();
//==============Add Specie===================
    
     
$('#addFeeds').on('click','#add_feeds',function (){
  console.log('Clicked!');
    $.post('class/addFeeds.php',$('#ffeeds').serialize(),function(data){
         
    if(data.s = true)
    {
        

new PNotify({
    title: 'Success',
    text: '<h4>New Feeds Added!!</h4>',
    type: 'success',
    animate_speed: "slow",
        delay: 2000,
        animate: {
            animate: true,
            in_class: 'bounceInLeft',
        out_class: 'bounceOutRight'
                }

            });
        $('#addFeeds').modal('hide');
           display_feeds();

       
    }
    else
    {
        new PNotify({
        title: 'Error!!',
        text: 'There was an error adding the Feeds!!',
        type: 'error',
        animate_speed: "slow",
        delay: 2000,
        animate: {
            animate: true,
            in_class: 'bounceInLeft',
        out_class: 'bounceOutRight'
                }

                });
     }
    },'json');

        

    




 });


// ==============end table feeds============================//
    

});

//===============end document ready========

</script>


</body>
</html>
